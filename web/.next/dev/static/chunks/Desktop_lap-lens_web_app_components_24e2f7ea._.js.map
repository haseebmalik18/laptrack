{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/haseebulhaqmalik/Desktop/lap-lens/web/app/components/TelemetryOverlay.tsx"],"sourcesContent":["\"use client\";\n\ninterface TelemetryOverlayProps {\n  telemetryPoint: any;\n}\n\nexport function TelemetryOverlay({ telemetryPoint }: TelemetryOverlayProps) {\n  if (!telemetryPoint) return null;\n\n  const speed = telemetryPoint.speed || 0;\n  const throttle = (telemetryPoint.throttle || 0) * 100;\n  const brake = (telemetryPoint.brake || 0) * 100;\n  const gear = telemetryPoint.gear || 0;\n  const rpm = telemetryPoint.rpm || 0;\n  const distance = telemetryPoint.distance || 0;\n  const time = telemetryPoint.time || 0;\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = (seconds % 60).toFixed(3);\n    return `${mins}:${secs.padStart(6, '0')}`;\n  };\n\n  return (\n    <div className=\"absolute inset-0 pointer-events-none z-10\">\n      {/* Top Bar - Professional Data Display */}\n      <div className=\"absolute top-0 left-0 right-0 bg-gradient-to-b from-black/95 to-transparent p-4\">\n        <div className=\"flex justify-between items-start max-w-full\">\n          {/* Left - Speed & Gear */}\n          <div className=\"flex gap-4\">\n            <div className=\"bg-black border-l-4 border-blue-500 px-4 py-2\">\n              <div className=\"text-[10px] text-zinc-400 uppercase tracking-wider mb-1\">Speed</div>\n              <div className=\"text-4xl font-bold text-white tabular-nums leading-none\">\n                {Math.round(speed)}\n              </div>\n              <div className=\"text-[10px] text-zinc-500 uppercase mt-1\">km/h</div>\n            </div>\n\n            <div className=\"bg-black border-l-4 border-cyan-500 px-4 py-2 min-w-[80px]\">\n              <div className=\"text-[10px] text-zinc-400 uppercase tracking-wider mb-1\">Gear</div>\n              <div className=\"text-4xl font-bold text-white tabular-nums leading-none text-center\">\n                {gear}\n              </div>\n            </div>\n          </div>\n\n          {/* Center - Time & Distance */}\n          <div className=\"flex gap-4\">\n            <div className=\"bg-black border-t-2 border-zinc-700 px-4 py-2\">\n              <div className=\"text-[10px] text-zinc-400 uppercase tracking-wider mb-1\">Lap Time</div>\n              <div className=\"text-xl font-mono text-white tabular-nums\">\n                {formatTime(time)}\n              </div>\n            </div>\n\n            <div className=\"bg-black border-t-2 border-zinc-700 px-4 py-2\">\n              <div className=\"text-[10px] text-zinc-400 uppercase tracking-wider mb-1\">Distance</div>\n              <div className=\"text-xl font-mono text-white tabular-nums\">\n                {Math.round(distance)}m\n              </div>\n            </div>\n          </div>\n\n          {/* Right - RPM */}\n          <div className=\"bg-black border-l-4 border-orange-500 px-4 py-2 min-w-[120px]\">\n            <div className=\"text-[10px] text-zinc-400 uppercase tracking-wider mb-1\">RPM</div>\n            <div className=\"text-2xl font-bold text-white tabular-nums\">\n              {Math.round(rpm).toLocaleString()}\n            </div>\n            <div className=\"h-1 bg-zinc-900 mt-2 w-full\">\n              <div\n                className=\"h-full transition-all duration-100\"\n                style={{\n                  width: `${Math.min((rpm / 15000) * 100, 100)}%`,\n                  backgroundColor:\n                    rpm > 12000 ? \"#ef4444\" : rpm > 10000 ? \"#f97316\" : \"#22c55e\",\n                }}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Bottom Bar - Input Bars */}\n      <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/95 to-transparent p-4\">\n        <div className=\"flex justify-center gap-6\">\n          {/* Throttle */}\n          <div className=\"bg-black border border-zinc-800 px-6 py-3 min-w-[180px]\">\n            <div className=\"flex justify-between items-center mb-2\">\n              <div className=\"text-[10px] text-zinc-400 uppercase tracking-wider\">Throttle</div>\n              <div className=\"text-sm font-mono text-white tabular-nums\">{Math.round(throttle)}%</div>\n            </div>\n            <div className=\"h-2 bg-zinc-900 w-full\">\n              <div\n                className=\"h-full bg-green-500 transition-all duration-100\"\n                style={{ width: `${throttle}%` }}\n              />\n            </div>\n          </div>\n\n          {/* Brake */}\n          <div className=\"bg-black border border-zinc-800 px-6 py-3 min-w-[180px]\">\n            <div className=\"flex justify-between items-center mb-2\">\n              <div className=\"text-[10px] text-zinc-400 uppercase tracking-wider\">Brake</div>\n              <div className=\"text-sm font-mono text-white tabular-nums\">{Math.round(brake)}%</div>\n            </div>\n            <div className=\"h-2 bg-zinc-900 w-full\">\n              <div\n                className=\"h-full bg-red-500 transition-all duration-100\"\n                style={{ width: `${brake}%` }}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 357, "column": 0}, "map": {"version":3,"sources":["file:///Users/haseebulhaqmalik/Desktop/lap-lens/web/app/components/TrackMapWithBoundaries.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { TelemetryOverlay } from \"./TelemetryOverlay\";\n\ninterface BoundaryPoint {\n  distance: number;\n  x: number;\n  z: number;\n}\n\ninterface TrackBoundaries {\n  track: {\n    id: number;\n    name: string;\n  };\n  left: BoundaryPoint[];\n  right: BoundaryPoint[];\n  originalPointCount: {\n    left: number;\n    right: number;\n  };\n  processedPointCount: {\n    left: number;\n    right: number;\n  };\n}\n\ninterface TrackMapWithBoundariesProps {\n  lapData: any;\n  corners?: any[];\n  currentIndex?: number;\n  trackName?: string;\n  referenceLapData?: any; // For comparison\n}\n\nexport function TrackMapWithBoundaries({\n  lapData,\n  corners = [],\n  currentIndex = 0,\n  trackName = \"sakhir-(bahrain)\",\n  referenceLapData,\n}: TrackMapWithBoundariesProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const smoothedRefIndexRef = useRef<number | null>(null);\n  const [boundaries, setBoundaries] = useState<TrackBoundaries | null>(null);\n  const [showBoundaries, setShowBoundaries] = useState(true);\n  const [showRacingLine, setShowRacingLine] = useState(true);\n  const [showBrakingZones, setShowBrakingZones] = useState(true);\n  const [showCornerMarkers, setShowCornerMarkers] = useState(true);\n  const [showImprovements, setShowImprovements] = useState(true);\n  const [tooltip, setTooltip] = useState<{ x: number; y: number; text: string } | null>(null);\n  const [hoveredImprovement, setHoveredImprovement] = useState<number | null>(null);\n\n  // Load boundaries\n  useEffect(() => {\n    fetch(`/api/boundaries/${trackName}`)\n      .then(res => res.json())\n      .then(data => {\n        if (data.error) {\n          setBoundaries(null);\n        } else {\n          setBoundaries(data);\n        }\n      })\n      .catch(err => {\n        setBoundaries(null);\n      });\n  }, [trackName]);\n\n  useEffect(() => {\n    if (!canvasRef.current || !lapData?.telemetry) {\n      return;\n    }\n\n    const telemetry = lapData.telemetry;\n\n    if (referenceLapData?.telemetry) {\n      // Reset smoothed index when reference lap changes\n      smoothedRefIndexRef.current = null;\n    }\n    if (telemetry.length === 0) {\n      return;\n    }\n\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    if (!ctx) return;\n\n    const dpr = window.devicePixelRatio || 1;\n    const rect = canvas.getBoundingClientRect();\n    canvas.width = rect.width * dpr;\n    canvas.height = rect.height * dpr;\n    ctx.scale(dpr, dpr);\n\n    const width = rect.width;\n    const height = rect.height;\n\n    // Get current car position for camera follow with interpolation\n    const floorIndex = Math.floor(currentIndex);\n    const ceilIndex = Math.min(Math.ceil(currentIndex), telemetry.length - 1);\n    const fraction = currentIndex - floorIndex;\n\n    const currentPoint = telemetry[floorIndex];\n    const nextPoint = telemetry[ceilIndex];\n\n    // Interpolate position for smooth movement\n    const interpolatedX = currentPoint && nextPoint\n      ? currentPoint.x + (nextPoint.x - currentPoint.x) * fraction\n      : currentPoint?.x || 0;\n    const interpolatedY = currentPoint && nextPoint\n      ? currentPoint.y + (nextPoint.y - currentPoint.y) * fraction\n      : currentPoint?.y || 0;\n\n    const centerX = interpolatedY;\n    const centerY = -interpolatedX;\n\n    // Camera zoom level (higher = more zoomed in)\n    const zoomScale = 1.0;\n\n    // View range around car (in meters)\n    const viewRange = 80;\n\n    const minX = centerX - viewRange;\n    const maxX = centerX + viewRange;\n    const minY = centerY - viewRange;\n    const maxY = centerY + viewRange;\n\n    const rangeX = maxX - minX;\n    const rangeY = maxY - minY;\n    const scale = Math.min(width / rangeX, height / rangeY) * zoomScale;\n\n    const toScreenX = (x: number, y: number) => {\n      const rx = y;\n      return (width / 2) + (rx - centerX) * scale;\n    };\n    const toScreenY = (x: number, y: number) => {\n      const ry = -x;\n      return (height / 2) + (ry - centerY) * scale;\n    };\n\n    // Clear background\n    ctx.fillStyle = \"#0a0a0a\";\n    ctx.fillRect(0, 0, width, height);\n\n    // Draw track boundaries\n    if (boundaries && showBoundaries) {\n      // Draw track surface (filled area between boundaries)\n      ctx.fillStyle = \"#2a2a2a\";\n      ctx.beginPath();\n\n      // Draw along left boundary\n      boundaries.left.forEach((p, i) => {\n        const x = toScreenX(p.x, p.z);\n        const y = toScreenY(p.x, p.z);\n        if (i === 0) ctx.moveTo(x, y);\n        else ctx.lineTo(x, y);\n      });\n\n      // Draw along right boundary in REVERSE to close the polygon\n      for (let i = boundaries.right.length - 1; i >= 0; i--) {\n        const p = boundaries.right[i];\n        const x = toScreenX(p.x, p.z);\n        const y = toScreenY(p.x, p.z);\n        ctx.lineTo(x, y);\n      }\n\n      ctx.closePath();\n      ctx.fill();\n\n      const getBahrainKerbConfig = (cornerIndex: number) => {\n        const configs = [\n          { inside: true, outside: true, outsideStart: 0.5, outsideEnd: 1.0 },  // T1\n          { inside: true, outside: true, outsideStart: 0.3, outsideEnd: 1.0 },  // T2\n          { inside: true, outside: false },  // T3\n          { inside: true, outside: true, outsideStart: 0.4, outsideEnd: 1.0 },  // T4\n          { inside: true, outside: false },  // T5\n          { inside: true, outside: true, outsideStart: 0.5, outsideEnd: 1.0 },  // T6\n          { inside: true, outside: false },  // T7\n          { inside: true, outside: true, outsideStart: 0.4, outsideEnd: 1.0 },  // T8\n          { inside: true, outside: false },  // T9\n          { inside: true, outside: true, outsideStart: 0.3, outsideEnd: 1.0 },  // T10\n          { inside: true, outside: true, outsideStart: 0.6, outsideEnd: 1.0 },  // T11\n          { inside: true, outside: false },  // T12\n          { inside: true, outside: true, outsideStart: 0.5, outsideEnd: 1.0 },  // T13\n          { inside: true, outside: true, outsideStart: 0.4, outsideEnd: 1.0 },  // T14\n          { inside: true, outside: false },  // T15\n        ];\n        return configs[cornerIndex] || { inside: true, outside: false };\n      };\n\n      const drawKerbsAtCorners = () => {\n        ctx.lineWidth = 5;\n        ctx.lineCap = \"butt\";\n\n        corners.forEach((corner: any, idx: number) => {\n          const isLeftTurn = corner.direction === 'left';\n          const insideBoundary = isLeftTurn ? boundaries.left : boundaries.right;\n          const outsideBoundary = isLeftTurn ? boundaries.right : boundaries.left;\n          const kerbConfig = getBahrainKerbConfig(idx);\n\n          const drawKerbOnBoundary = (boundary: BoundaryPoint[], start: number, end: number) => {\n            for (let i = 0; i < boundary.length - 1; i++) {\n              const p1 = boundary[i];\n              const p2 = boundary[i + 1];\n\n              if (p1.distance >= start && p1.distance <= end) {\n                const segmentStart = Math.floor(p1.distance / 3);\n                const color = segmentStart % 2 === 0 ? \"#cc0000\" : \"#d8d8d8\";\n\n                ctx.strokeStyle = color;\n                ctx.beginPath();\n                ctx.moveTo(toScreenX(p1.x, p1.z), toScreenY(p1.x, p1.z));\n                ctx.lineTo(toScreenX(p2.x, p2.z), toScreenY(p2.x, p2.z));\n                ctx.stroke();\n              }\n            }\n          };\n\n          if (kerbConfig.inside) {\n            drawKerbOnBoundary(insideBoundary, corner.entryDistance, corner.exitDistance);\n          }\n\n          if (kerbConfig.outside) {\n            const cornerLength = corner.exitDistance - corner.entryDistance;\n            const exitStart = corner.entryDistance + cornerLength * (kerbConfig.outsideStart || 0.5);\n            const exitEnd = corner.entryDistance + cornerLength * (kerbConfig.outsideEnd || 1.0);\n            drawKerbOnBoundary(outsideBoundary, exitStart, exitEnd);\n          }\n        });\n      };\n\n      // Draw kerbs at corners\n      drawKerbsAtCorners();\n\n      // Draw white track boundary lines\n      ctx.strokeStyle = \"rgba(255, 255, 255, 0.4)\";\n      ctx.lineWidth = 2;\n      ctx.setLineDash([]);\n\n      // Helper function to draw smooth boundary line using quadratic curves\n      const drawSmoothBoundary = (boundary: BoundaryPoint[]) => {\n        if (boundary.length < 2) return;\n\n        const points = boundary.map(p => ({\n          x: toScreenX(p.x, p.z),\n          y: toScreenY(p.x, p.z)\n        }));\n\n        ctx.beginPath();\n        ctx.moveTo(points[0].x, points[0].y);\n\n        // Use quadratic curves for smooth lines\n        for (let i = 1; i < points.length - 1; i++) {\n          const currentPoint = points[i];\n          const nextPoint = points[i + 1];\n\n          // Calculate midpoint for smooth curve\n          const midX = (currentPoint.x + nextPoint.x) / 2;\n          const midY = (currentPoint.y + nextPoint.y) / 2;\n\n          ctx.quadraticCurveTo(currentPoint.x, currentPoint.y, midX, midY);\n        }\n\n        // Last segment\n        const lastPoint = points[points.length - 1];\n        ctx.lineTo(lastPoint.x, lastPoint.y);\n        ctx.stroke();\n      };\n\n      // Left boundary white line (smooth)\n      drawSmoothBoundary(boundaries.left);\n\n      // Right boundary white line (smooth)\n      drawSmoothBoundary(boundaries.right);\n\n      // Draw start/finish line\n      if (boundaries.left.length > 0 && boundaries.right.length > 0) {\n        const leftStart = boundaries.left[0];\n        const rightStart = boundaries.right[0];\n        ctx.strokeStyle = \"rgba(0, 255, 136, 0.8)\";\n        ctx.lineWidth = 3;\n        ctx.setLineDash([5, 5]);\n        ctx.beginPath();\n        ctx.moveTo(toScreenX(leftStart.x, leftStart.z), toScreenY(leftStart.x, leftStart.z));\n        ctx.lineTo(toScreenX(rightStart.x, rightStart.z), toScreenY(rightStart.x, rightStart.z));\n        ctx.stroke();\n        ctx.setLineDash([]);\n      }\n    }\n\n    // Draw braking zones - DISABLED (showing in wrong spots)\n    // if (showBrakingZones) {\n    //   corners.forEach((corner: any) => {\n    //     if (corner.brakingZone) {\n    //       const bz = corner.brakingZone;\n    //       const startIdx = telemetry.findIndex((p: any) => p.distance >= bz.entryDistance);\n    //       const endIdx = telemetry.findIndex((p: any) => p.distance >= bz.exitDistance);\n\n    //       if (startIdx >= 0 && endIdx >= 0) {\n    //         ctx.strokeStyle = \"rgba(255, 60, 60, 0.7)\";\n    //         ctx.lineWidth = 8;\n    //         ctx.lineCap = \"round\";\n    //         ctx.lineJoin = \"round\";\n\n    //         ctx.beginPath();\n    //         for (let i = startIdx; i <= endIdx; i++) {\n    //           const p = telemetry[i];\n    //           const x = toScreenX(p.x, p.y);\n    //           const y = toScreenY(p.x, p.y);\n    //           if (i === startIdx) ctx.moveTo(x, y);\n    //           else ctx.lineTo(x, y);\n    //         }\n    //         ctx.stroke();\n    //       }\n    //     }\n    //   });\n    // }\n\n    // Draw reference lap racing line (if available)\n    if (showRacingLine && referenceLapData?.telemetry) {\n      ctx.lineWidth = 3;\n      ctx.strokeStyle = \"rgba(0, 200, 255, 0.5)\"; // Cyan/blue for reference\n      ctx.lineCap = \"round\";\n      ctx.lineJoin = \"round\";\n\n      ctx.beginPath();\n      referenceLapData.telemetry.forEach((p: any, i: number) => {\n        const x = toScreenX(p.x, p.y);\n        const y = toScreenY(p.x, p.y);\n\n        if (i === 0) {\n          ctx.moveTo(x, y);\n        } else {\n          const prevP = referenceLapData.telemetry[i - 1];\n          const dx = p.x - prevP.x;\n          const dy = p.y - prevP.y;\n          const dist = Math.sqrt(dx * dx + dy * dy);\n\n          if (dist > 50) {\n            ctx.moveTo(x, y);\n          } else {\n            ctx.lineTo(x, y);\n          }\n        }\n      });\n      ctx.stroke();\n    }\n\n    // Draw current lap racing line\n    if (showRacingLine) {\n      ctx.lineWidth = 3;\n      ctx.strokeStyle = \"#ffff00\";\n      ctx.lineCap = \"round\";\n      ctx.lineJoin = \"round\";\n\n      ctx.beginPath();\n      telemetry.forEach((p: any, i: number) => {\n        const x = toScreenX(p.x, p.y);\n        const y = toScreenY(p.x, p.y);\n\n        // Check for large gaps (discontinuities)\n        if (i === 0) {\n          ctx.moveTo(x, y);\n        } else {\n          const prevP = telemetry[i - 1];\n          const dx = p.x - prevP.x;\n          const dy = p.y - prevP.y;\n          const dist = Math.sqrt(dx * dx + dy * dy);\n\n          // If gap is too large (> 50m), start new path\n          if (dist > 50) {\n            ctx.moveTo(x, y);\n          } else {\n            ctx.lineTo(x, y);\n          }\n        }\n      });\n      ctx.stroke();\n    }\n\n    // Draw corner markers - DISABLED (WIP)\n    // if (showCornerMarkers) {\n    //   corners.forEach((corner: any, idx: number) => {\n    //     // Find closest telemetry point to apex distance (not just within 5m)\n    //     let apexPoint = null;\n    //     let minDist = Infinity;\n\n    //     for (const p of telemetry) {\n    //       const dist = Math.abs(p.distance - corner.apexDistance);\n    //       if (dist < minDist) {\n    //         minDist = dist;\n    //         apexPoint = p;\n    //       }\n    //     }\n\n    //     if (apexPoint) {\n    //       const x = toScreenX(apexPoint.x, apexPoint.y);\n    //       const y = toScreenY(apexPoint.x, apexPoint.y);\n\n    //       ctx.fillStyle = \"#000\";\n    //       ctx.beginPath();\n    //       ctx.arc(x, y, 16, 0, Math.PI * 2);\n    //       ctx.fill();\n\n    //       ctx.fillStyle = \"#fff\";\n    //       ctx.beginPath();\n    //       ctx.arc(x, y, 14, 0, Math.PI * 2);\n    //       ctx.fill();\n\n    //       ctx.fillStyle = \"#000\";\n    //       ctx.font = \"bold 11px sans-serif\";\n    //       ctx.textAlign = \"center\";\n    //       ctx.textBaseline = \"middle\";\n    //       ctx.fillText(`${idx + 1}`, x, y);\n    //     }\n    //   });\n    // }\n\n    // Draw improvement opportunity markers (only where slower than reference)\n    if (showImprovements && referenceLapData?.corners && currentPoint) {\n      const currentDistance = currentPoint.distance;\n\n      corners.forEach((corner: any, idx: number) => {\n        // Find matching corner in reference lap\n        const refCorner = referenceLapData.corners.find((c: any) =>\n          Math.abs(c.apexDistance - corner.apexDistance) < 50\n        );\n\n        if (refCorner && corner.brakingZone) {\n          // Calculate speed difference\n          const speedDiff = (refCorner.apexSpeed || 0) - (corner.apexSpeed || 0);\n          const timeLoss = (corner.exitDistance - corner.entryDistance) / Math.max(corner.apexSpeed, 1) -\n                          (refCorner.exitDistance - refCorner.entryDistance) / Math.max(refCorner.apexSpeed, 1);\n\n          // Only show marker if losing significant time (>0.1s)\n          if (timeLoss > 0.1) {\n            const bz = corner.brakingZone;\n\n            // Find closest telemetry point to braking zone entry\n            let markerPoint = null;\n            let minDist = Infinity;\n            for (const p of telemetry) {\n              const dist = Math.abs(p.distance - bz.entryDistance);\n              if (dist < minDist) {\n                minDist = dist;\n                markerPoint = p;\n              }\n            }\n\n            if (markerPoint) {\n              const mx = toScreenX(markerPoint.x, markerPoint.y);\n              const my = toScreenY(markerPoint.x, markerPoint.y);\n\n              // Check if currently AT this spot (tight window - only when you reach it)\n              const distanceToCorner = currentDistance - bz.entryDistance;\n              const isAtSpot = Math.abs(distanceToCorner) < 20; // Very tight - only at the spot\n\n              // Yellow marker with exclamation mark\n              ctx.fillStyle = \"#ffff00\";\n              ctx.beginPath();\n              ctx.arc(mx, my, 10, 0, Math.PI * 2);\n              ctx.fill();\n\n              // Black border\n              ctx.strokeStyle = \"#000000\";\n              ctx.lineWidth = 2;\n              ctx.stroke();\n\n              // Exclamation mark inside\n              ctx.fillStyle = \"#000000\";\n              ctx.font = \"bold 14px Arial\";\n              ctx.textAlign = \"center\";\n              ctx.textBaseline = \"middle\";\n              ctx.fillText(\"!\", mx, my);\n\n              // Show tip ONLY when at the spot\n              if (isAtSpot) {\n                // Generate improvement tip based on data\n                let tipText = '';\n                if (speedDiff > 5) {\n                  tipText = `Carry +${speedDiff.toFixed(0)} km/h`;\n                } else if (timeLoss > 0.3) {\n                  tipText = 'Brake later';\n                } else {\n                  tipText = 'More speed possible';\n                }\n\n                // Dynamic tooltip size based on text\n                const boxWidth = 160;\n                const boxHeight = 36;\n                const boxX = mx - boxWidth / 2;\n                const boxY = my - 55;\n\n                // Tooltip background - solid yellow\n                ctx.fillStyle = \"#ffff00\";\n                ctx.fillRect(boxX, boxY, boxWidth, boxHeight);\n\n                // Black border\n                ctx.strokeStyle = \"#000000\";\n                ctx.lineWidth = 2;\n                ctx.strokeRect(boxX, boxY, boxWidth, boxHeight);\n\n                // Tip text - black on yellow\n                ctx.fillStyle = \"#000000\";\n                ctx.font = \"bold 14px Arial\";\n                ctx.textAlign = \"center\";\n                ctx.fillText(tipText, mx, boxY + 22);\n              }\n            }\n          }\n        }\n      });\n    }\n\n    // Draw reference lap position (if available) - TIME SYNCHRONIZED\n    if (referenceLapData?.telemetry && currentPoint) {\n      const refTelemetry = referenceLapData.telemetry;\n\n      // TIME-BASED MATCHING: Find where reference lap was at the same time\n      const currentTime = currentPoint.time;\n\n      // Find the reference point that matches the current time\n      let targetRefIndex = refTelemetry.findIndex((p: any) => p.time >= currentTime);\n      if (targetRefIndex === -1) targetRefIndex = refTelemetry.length - 1;\n      if (targetRefIndex === 0) targetRefIndex = 1; // Ensure we can interpolate\n\n      // Initialize smoothed index on first frame to current target\n      if (smoothedRefIndexRef.current === null) {\n        smoothedRefIndexRef.current = targetRefIndex;\n      }\n\n      // Smooth transition to target index\n      const currentSmoothed = smoothedRefIndexRef.current ?? targetRefIndex;\n      const difference = targetRefIndex - currentSmoothed;\n      smoothedRefIndexRef.current = currentSmoothed + difference * 0.3; // Smooth movement\n\n      // Now use the smoothed index for interpolation\n      const smoothedIdx = smoothedRefIndexRef.current ?? 0;\n      const idx1 = Math.floor(smoothedIdx);\n      const idx2 = Math.min(idx1 + 1, refTelemetry.length - 1);\n      const refFraction = smoothedIdx - idx1;\n\n      const refPoint1 = refTelemetry[idx1];\n      const refPoint2 = refTelemetry[idx2];\n\n      // Smooth interpolation with safety checks\n      if (refPoint1 && refPoint2) {\n        const refInterpolatedX = refPoint1.x + (refPoint2.x - refPoint1.x) * refFraction;\n        const refInterpolatedY = refPoint1.y + (refPoint2.y - refPoint1.y) * refFraction;\n\n        const rx = toScreenX(refInterpolatedX, refInterpolatedY);\n        const ry = toScreenY(refInterpolatedX, refInterpolatedY);\n\n        // Only draw if coordinates are valid (not NaN)\n        if (isFinite(rx) && isFinite(ry)) {\n          // Reference lap car (cyan/blue) - same size as current lap\n          ctx.fillStyle = \"#00c8ff\";\n          ctx.beginPath();\n          ctx.arc(rx, ry, 5, 0, Math.PI * 2);\n          ctx.fill();\n\n          // Inner dot\n          ctx.fillStyle = \"#000000\";\n          ctx.beginPath();\n          ctx.arc(rx, ry, 2, 0, Math.PI * 2);\n          ctx.fill();\n        }\n      }\n    }\n\n    // Draw current position as a clean dot using interpolated position\n    if (currentPoint) {\n      const cx = toScreenX(interpolatedX, interpolatedY);\n      const cy = toScreenY(interpolatedX, interpolatedY);\n\n      // Outer ring (yellow to match racing line)\n      ctx.fillStyle = \"#ffff00\";\n      ctx.beginPath();\n      ctx.arc(cx, cy, 5, 0, Math.PI * 2);\n      ctx.fill();\n\n      // Inner dot\n      ctx.fillStyle = \"#000000\";\n      ctx.beginPath();\n      ctx.arc(cx, cy, 2, 0, Math.PI * 2);\n      ctx.fill();\n    }\n  }, [lapData, corners, currentIndex, boundaries, showBoundaries, showRacingLine, showBrakingZones, showCornerMarkers, showImprovements, referenceLapData]);\n\n  const currentTelemetryPoint = lapData?.telemetry?.[Math.floor(currentIndex)];\n\n  return (\n    <div className=\"relative rounded-lg border border-zinc-800 bg-zinc-900/50 mx-auto\" style={{ maxWidth: \"1200px\" }}>\n      {/* Telemetry Overlay */}\n      <TelemetryOverlay telemetryPoint={currentTelemetryPoint} />\n\n      {/* Toggle controls - moved to bottom right corner */}\n      <div className=\"absolute bottom-20 right-2 z-20 flex flex-col gap-1 pointer-events-auto\">\n        <button\n          onClick={() => setShowBoundaries(!showBoundaries)}\n          className={`px-2 py-1 text-[10px] uppercase tracking-wide transition-colors ${\n            showBoundaries\n              ? 'bg-black/90 text-white border border-zinc-700'\n              : 'bg-black/60 text-zinc-500 border border-zinc-800 hover:bg-black/80'\n          }`}\n        >\n          Boundaries\n        </button>\n        <button\n          onClick={() => setShowRacingLine(!showRacingLine)}\n          className={`px-2 py-1 text-[10px] uppercase tracking-wide transition-colors ${\n            showRacingLine\n              ? 'bg-black/90 text-white border border-zinc-700'\n              : 'bg-black/60 text-zinc-500 border border-zinc-800 hover:bg-black/80'\n          }`}\n        >\n          Line\n        </button>\n        <button\n          disabled\n          className=\"px-2 py-1 text-[10px] uppercase tracking-wide bg-black/40 text-zinc-600 border border-zinc-800 cursor-not-allowed\"\n        >\n          Braking (WIP)\n        </button>\n        <button\n          disabled\n          className=\"px-2 py-1 text-[10px] uppercase tracking-wide bg-black/40 text-zinc-600 border border-zinc-800 cursor-not-allowed\"\n        >\n          Corners (WIP)\n        </button>\n        <button\n          disabled\n          className=\"px-2 py-1 text-[10px] uppercase tracking-wide bg-black/40 text-zinc-600 border border-zinc-800 cursor-not-allowed\"\n        >\n          Tips (WIP)\n        </button>\n      </div>\n\n      <canvas\n        ref={canvasRef}\n        className=\"cursor-crosshair bg-black mx-auto\"\n        style={{ height: \"650px\", width: \"1200px\", maxWidth: \"100%\" }}\n      />\n\n      {tooltip && (\n        <div\n          className=\"pointer-events-none fixed z-50 rounded bg-black px-3 py-2 text-sm text-white shadow-lg border border-zinc-700\"\n          style={{\n            left: tooltip.x + 10,\n            top: tooltip.y + 10,\n          }}\n        >\n          {tooltip.text}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}