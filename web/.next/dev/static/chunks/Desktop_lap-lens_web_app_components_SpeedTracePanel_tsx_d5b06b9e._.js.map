{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/haseebulhaqmalik/Desktop/lap-lens/web/app/components/SpeedTracePanel.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo } from \"react\";\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from \"recharts\";\n\ninterface SpeedTracePanelProps {\n  currentLapData: any;\n  referenceLapData: any;\n  currentIndex: number;\n}\n\nexport function SpeedTracePanel({ currentLapData, referenceLapData, currentIndex }: SpeedTracePanelProps) {\n  const chartData = useMemo(() => {\n    if (!currentLapData?.telemetry) return [];\n\n    const current = currentLapData.telemetry;\n    const reference = referenceLapData?.telemetry || [];\n\n    // Sample every 10 points for performance\n    const sampledData = [];\n    for (let i = 0; i < current.length; i += 10) {\n      const point = current[i];\n      let refPoint = null;\n      if (reference.length > 0) {\n        refPoint = reference.find((p: any) => Math.abs(p.distance - point.distance) < 5);\n      }\n\n      sampledData.push({\n        distance: Math.round(point.distance),\n        currentSpeed: Math.round(point.speed),\n        referenceSpeed: refPoint ? Math.round(refPoint.speed) : null,\n      });\n    }\n\n    return sampledData;\n  }, [currentLapData, referenceLapData]);\n\n  const currentPoint = currentLapData?.telemetry?.[Math.floor(currentIndex)];\n  const currentDistance = currentPoint?.distance || 0;\n\n  if (!currentLapData?.telemetry) {\n    return (\n      <div className=\"p-6 text-center text-zinc-500\">\n        No telemetry data available\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-full flex flex-col\">\n      <div className=\"border-b border-zinc-800 px-4 py-3\">\n        <h3 className=\"text-sm font-semibold text-white uppercase tracking-wider\">\n          Speed Trace\n        </h3>\n        <p className=\"text-xs text-zinc-500 mt-1\">\n          vs Lap {referenceLapData?.metadata?.lapNumber || '?'}\n        </p>\n      </div>\n\n      <div className=\"flex-1 p-4\">\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <LineChart data={chartData} margin={{ top: 5, right: 10, left: -20, bottom: 20 }}>\n            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#27272a\" vertical={false} />\n            <XAxis\n              dataKey=\"distance\"\n              stroke=\"#52525b\"\n              tick={{ fill: '#71717a', fontSize: 10 }}\n              tickLine={false}\n              axisLine={{ stroke: '#3f3f46' }}\n              label={{ value: 'Distance (m)', position: 'insideBottom', offset: -15, fill: '#71717a', fontSize: 10 }}\n            />\n            <YAxis\n              stroke=\"#52525b\"\n              tick={{ fill: '#71717a', fontSize: 10 }}\n              tickLine={false}\n              axisLine={{ stroke: '#3f3f46' }}\n              label={{ value: 'km/h', angle: -90, position: 'insideLeft', fill: '#71717a', fontSize: 10 }}\n            />\n            <Tooltip\n              contentStyle={{ backgroundColor: '#18181b', border: '1px solid #3f3f46', borderRadius: '4px' }}\n              labelStyle={{ color: '#a1a1aa', fontSize: 11 }}\n              itemStyle={{ fontSize: 11 }}\n            />\n            <Line\n              type=\"monotone\"\n              dataKey=\"currentSpeed\"\n              stroke=\"#facc15\"\n              name=\"Current\"\n              dot={false}\n              strokeWidth={2}\n              isAnimationActive={false}\n            />\n            {referenceLapData && (\n              <Line\n                type=\"monotone\"\n                dataKey=\"referenceSpeed\"\n                stroke=\"#22d3ee\"\n                name=\"Reference\"\n                dot={false}\n                strokeWidth={1.5}\n                opacity={0.7}\n                isAnimationActive={false}\n              />\n            )}\n            {/* Current position marker */}\n            <Line\n              type=\"monotone\"\n              dataKey={() => null}\n              stroke=\"#ef4444\"\n              strokeWidth={2}\n              dot={false}\n              isAnimationActive={false}\n            />\n          </LineChart>\n        </ResponsiveContainer>\n\n        {/* Current speed display */}\n        <div className=\"mt-4 pt-4 border-t border-zinc-800\">\n          <div className=\"text-xs text-zinc-500 mb-2\">Current Speed</div>\n          <div className=\"text-3xl font-bold font-mono text-yellow-400\">\n            {Math.round(currentPoint?.speed || 0)} <span className=\"text-lg text-zinc-500\">km/h</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}