{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/haseebulhaqmalik/Desktop/lap-lens/web/app/viewer/components/TrackViewer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRef, useMemo, useState, useEffect } from \"react\";\nimport { Canvas, useFrame } from \"@react-three/fiber\";\nimport { OrbitControls, Line, Text } from \"@react-three/drei\";\nimport * as THREE from \"three\";\n\ninterface TrackViewerProps {\n  lapsData: any[];\n  currentLapIndex: number;\n  playbackIndex: number;\n  smoothPlaybackRef?: React.MutableRefObject<number>;\n  isPlaying?: boolean;\n  playbackSpeed?: number;\n}\n\ninterface CornerData {\n  corners: any[];\n  trackName: string;\n}\n\nfunction Kerb({ position, rotation, length }: { position: [number, number, number]; rotation: number; length: number }) {\n  const geometry = useMemo(() => {\n    const shape = new THREE.Shape();\n    const width = 2;\n    shape.moveTo(-length / 2, -width / 2);\n    shape.lineTo(length / 2, -width / 2);\n    shape.lineTo(length / 2, width / 2);\n    shape.lineTo(-length / 2, width / 2);\n    return new THREE.ExtrudeGeometry(shape, { depth: 0.3, bevelEnabled: false });\n  }, [length]);\n\n  const texture = useMemo(() => {\n    const canvas = document.createElement('canvas');\n    canvas.width = 256;\n    canvas.height = 64;\n    const ctx = canvas.getContext('2d')!;\n\n    const stripeWidth = 32;\n    for (let i = 0; i < 8; i++) {\n      ctx.fillStyle = i % 2 === 0 ? '#ff0000' : '#ffffff';\n      ctx.fillRect(i * stripeWidth, 0, stripeWidth, 64);\n    }\n\n    const tex = new THREE.CanvasTexture(canvas);\n    tex.wrapS = THREE.RepeatWrapping;\n    tex.repeat.x = length / 10;\n    return tex;\n  }, [length]);\n\n  return (\n    <mesh geometry={geometry} position={position} rotation={[0, rotation, 0]}>\n      <meshStandardMaterial map={texture} />\n    </mesh>\n  );\n}\n\nfunction BrakingZone({ startPoint, endPoint }: { startPoint: any; endPoint: any }) {\n  const points = useMemo(() => [\n    new THREE.Vector3(startPoint.x, 0.1, startPoint.y),\n    new THREE.Vector3(endPoint.x, 0.1, endPoint.y)\n  ], [startPoint, endPoint]);\n\n  return (\n    <Line\n      points={points}\n      color=\"#ff4444\"\n      lineWidth={8}\n    />\n  );\n}\n\nfunction CornerMarker({ point, cornerNumber, type }: { point: any; cornerNumber: number; type: string }) {\n  const colorMap: Record<string, string> = {\n    hairpin: '#ff0000',\n    slow: '#ff9900',\n    medium: '#ffff00',\n    fast: '#00ff00',\n    'very-fast': '#00ffff'\n  };\n\n  return (\n    <group position={[point.x, 2, point.y]}>\n      <mesh>\n        <sphereGeometry args={[3, 16, 16]} />\n        <meshStandardMaterial color={colorMap[type] || '#ffffff'} emissive={colorMap[type] || '#ffffff'} emissiveIntensity={0.5} />\n      </mesh>\n      <Text\n        position={[0, 8, 0]}\n        fontSize={4}\n        color=\"white\"\n        anchorX=\"center\"\n        anchorY=\"middle\"\n      >\n        {cornerNumber}\n      </Text>\n    </group>\n  );\n}\n\nfunction Track({ points, cornerData }: { points: any[]; cornerData?: CornerData }) {\n  const ROAD_WIDTH = 15;\n  const KERB_WIDTH = 2.5;\n\n  const trackPoints = useMemo(() => {\n    return points.map(p => new THREE.Vector3(p.x, 0, p.y));\n  }, [points]);\n\n  const curve = useMemo(() => {\n    const c = new THREE.CatmullRomCurve3(trackPoints);\n    c.closed = true;\n    return c;\n  }, [trackPoints]);\n\n  const roadGeometry = useMemo(() => {\n    const segments = points.length * 3;\n    const vertices: number[] = [];\n    const indices: number[] = [];\n    const uvs: number[] = [];\n    const normals: number[] = [];\n\n    for (let i = 0; i <= segments; i++) {\n      const t = i / segments;\n      const point = curve.getPoint(t);\n      const tangent = curve.getTangent(t);\n\n      const perpendicular = new THREE.Vector3(-tangent.z, 0, tangent.x).normalize();\n\n      const left = point.clone().add(perpendicular.clone().multiplyScalar(ROAD_WIDTH / 2));\n      const right = point.clone().add(perpendicular.clone().multiplyScalar(-ROAD_WIDTH / 2));\n\n      vertices.push(left.x, left.y, left.z);\n      vertices.push(right.x, right.y, right.z);\n\n      uvs.push(0, t * 10);\n      uvs.push(1, t * 10);\n\n      normals.push(0, 1, 0);\n      normals.push(0, 1, 0);\n\n      if (i < segments) {\n        const base = i * 2;\n        indices.push(base, base + 1, base + 2);\n        indices.push(base + 1, base + 3, base + 2);\n      }\n    }\n\n    const geometry = new THREE.BufferGeometry();\n    geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));\n    geometry.setAttribute('uv', new THREE.Float32BufferAttribute(uvs, 2));\n    geometry.setAttribute('normal', new THREE.Float32BufferAttribute(normals, 3));\n    geometry.setIndex(indices);\n\n    return geometry;\n  }, [curve, points.length]);\n\n  const asphaltTexture = useMemo(() => {\n    const canvas = document.createElement('canvas');\n    canvas.width = 512;\n    canvas.height = 512;\n    const ctx = canvas.getContext('2d')!;\n\n    ctx.fillStyle = '#1a1a1a';\n    ctx.fillRect(0, 0, 512, 512);\n\n    for (let i = 0; i < 5000; i++) {\n      const x = Math.random() * 512;\n      const y = Math.random() * 512;\n      const brightness = Math.random() * 30 + 10;\n      ctx.fillStyle = `rgb(${brightness}, ${brightness}, ${brightness})`;\n      ctx.fillRect(x, y, Math.random() * 2, Math.random() * 2);\n    }\n\n    const tex = new THREE.CanvasTexture(canvas);\n    tex.wrapS = THREE.RepeatWrapping;\n    tex.wrapT = THREE.RepeatWrapping;\n    tex.repeat.set(2, 50);\n    return tex;\n  }, []);\n\n  const roadEdgeGeometry = useMemo(() => {\n    const segments = points.length * 3;\n    const leftEdge: THREE.Vector3[] = [];\n    const rightEdge: THREE.Vector3[] = [];\n\n    for (let i = 0; i <= segments; i++) {\n      const t = i / segments;\n      const point = curve.getPoint(t);\n      const tangent = curve.getTangent(t);\n\n      const perpendicular = new THREE.Vector3(-tangent.z, 0, tangent.x).normalize();\n\n      leftEdge.push(point.clone().add(perpendicular.clone().multiplyScalar(ROAD_WIDTH / 2)));\n      rightEdge.push(point.clone().add(perpendicular.clone().multiplyScalar(-ROAD_WIDTH / 2)));\n    }\n\n    return { leftEdge, rightEdge };\n  }, [curve, points.length]);\n\n  const getPointAtDistance = (distance: number) => {\n    return points.find(p => Math.abs(p.distance - distance) < 0.5) || points[0];\n  };\n\n  const kerbGeometry = useMemo(() => {\n    const segments = points.length * 4;\n    const leftKerbVerts: number[] = [];\n    const rightKerbVerts: number[] = [];\n    const leftKerbIndices: number[] = [];\n    const rightKerbIndices: number[] = [];\n    const leftKerbUVs: number[] = [];\n    const rightKerbUVs: number[] = [];\n    const normals: number[] = [];\n\n    for (let i = 0; i <= segments; i++) {\n      const t = (i / segments) % 1;\n      const point = curve.getPoint(t);\n      const tangent = curve.getTangent(t);\n      const perpendicular = new THREE.Vector3(-tangent.z, 0, tangent.x).normalize();\n\n      const leftInner = point.clone().add(perpendicular.clone().multiplyScalar(ROAD_WIDTH / 2));\n      const leftOuter = point.clone().add(perpendicular.clone().multiplyScalar(ROAD_WIDTH / 2 + KERB_WIDTH));\n\n      const rightInner = point.clone().add(perpendicular.clone().multiplyScalar(-ROAD_WIDTH / 2));\n      const rightOuter = point.clone().add(perpendicular.clone().multiplyScalar(-ROAD_WIDTH / 2 - KERB_WIDTH));\n\n      leftKerbVerts.push(\n        leftInner.x, 0.2, leftInner.z,\n        leftOuter.x, 0.2, leftOuter.z\n      );\n\n      rightKerbVerts.push(\n        rightInner.x, 0.2, rightInner.z,\n        rightOuter.x, 0.2, rightOuter.z\n      );\n\n      leftKerbUVs.push(0, t * 30, 1, t * 30);\n      rightKerbUVs.push(0, t * 30, 1, t * 30);\n\n      if (i < segments) {\n        const base = i * 2;\n        leftKerbIndices.push(base, base + 2, base + 1, base + 1, base + 2, base + 3);\n        rightKerbIndices.push(base, base + 1, base + 2, base + 1, base + 3, base + 2);\n      }\n    }\n\n    const leftGeom = new THREE.BufferGeometry();\n    leftGeom.setAttribute('position', new THREE.Float32BufferAttribute(leftKerbVerts, 3));\n    leftGeom.setAttribute('uv', new THREE.Float32BufferAttribute(leftKerbUVs, 2));\n    leftGeom.setIndex(leftKerbIndices);\n    leftGeom.computeVertexNormals();\n\n    const rightGeom = new THREE.BufferGeometry();\n    rightGeom.setAttribute('position', new THREE.Float32BufferAttribute(rightKerbVerts, 3));\n    rightGeom.setAttribute('uv', new THREE.Float32BufferAttribute(rightKerbUVs, 2));\n    rightGeom.setIndex(rightKerbIndices);\n    rightGeom.computeVertexNormals();\n\n    return { leftGeom, rightGeom };\n  }, [curve, points.length]);\n\n  const kerbTexture = useMemo(() => {\n    const canvas = document.createElement('canvas');\n    canvas.width = 64;\n    canvas.height = 256;\n    const ctx = canvas.getContext('2d')!;\n\n    const stripeHeight = 32;\n    for (let i = 0; i < 8; i++) {\n      ctx.fillStyle = i % 2 === 0 ? '#ff0000' : '#ffffff';\n      ctx.fillRect(0, i * stripeHeight, 64, stripeHeight);\n    }\n\n    const tex = new THREE.CanvasTexture(canvas);\n    tex.wrapS = THREE.RepeatWrapping;\n    tex.wrapT = THREE.RepeatWrapping;\n    return tex;\n  }, []);\n\n  return (\n    <>\n      <mesh geometry={roadGeometry} receiveShadow>\n        <meshStandardMaterial\n          map={asphaltTexture}\n          roughness={0.95}\n          metalness={0.05}\n        />\n      </mesh>\n\n      <mesh geometry={kerbGeometry.leftGeom}>\n        <meshStandardMaterial map={kerbTexture} />\n      </mesh>\n\n      <mesh geometry={kerbGeometry.rightGeom}>\n        <meshStandardMaterial map={kerbTexture} />\n      </mesh>\n\n      <Line points={roadEdgeGeometry.leftEdge} color=\"#ffffff\" lineWidth={2} position={[0, 0.1, 0]} />\n      <Line points={roadEdgeGeometry.rightEdge} color=\"#ffffff\" lineWidth={2} position={[0, 0.1, 0]} />\n\n      <Line\n        points={trackPoints.map(p => new THREE.Vector3(p.x, 0.15, p.z))}\n        color=\"#ffff00\"\n        lineWidth={1}\n      />\n\n      <mesh position={[points[0].x, 0.2, points[0].y]} rotation={[-Math.PI / 2, 0, 0]}>\n        <planeGeometry args={[ROAD_WIDTH, 40]} />\n        <meshStandardMaterial\n          color=\"#ffffff\"\n          transparent\n          opacity={0.8}\n        />\n      </mesh>\n\n      {cornerData?.corners.map((corner) => {\n        const apexPoint = getPointAtDistance(corner.apexDistance);\n\n        return (\n          <group key={corner.number}>\n            <CornerMarker\n              point={apexPoint}\n              cornerNumber={corner.number}\n              type={corner.type}\n            />\n\n            {corner.brakingZone && (\n              <BrakingZone\n                startPoint={getPointAtDistance(corner.brakingZone.entryDistance)}\n                endPoint={getPointAtDistance(corner.brakingZone.exitDistance)}\n              />\n            )}\n          </group>\n        );\n      })}\n    </>\n  );\n}\n\nfunction Car({ lapData, isActive, smoothPlaybackRef, isPlaying, playbackSpeed, color, cameraTargetRef }: {\n  lapData: any;\n  isActive: boolean;\n  smoothPlaybackRef?: React.MutableRefObject<number>;\n  isPlaying?: boolean;\n  playbackSpeed?: number;\n  color: string;\n  cameraTargetRef?: React.MutableRefObject<{ x: number; z: number }>;\n}) {\n  const carRef = useRef<THREE.Group>(null);\n  const localPlayback = useRef(0);\n  const smoothRotation = useRef(0);\n  const lastPos = useRef({ x: 0, z: 0 });\n\n  useFrame((state, delta) => {\n    if (!carRef.current || !isActive || !lapData.points) return;\n\n    const maxIndex = lapData.points.length - 1;\n\n    if (isPlaying && playbackSpeed) {\n      const speed = playbackSpeed * 60;\n      localPlayback.current += delta * speed;\n\n      if (localPlayback.current > maxIndex) {\n        localPlayback.current = maxIndex;\n      }\n\n      if (smoothPlaybackRef) {\n        smoothPlaybackRef.current = Math.floor(localPlayback.current);\n      }\n    } else if (smoothPlaybackRef) {\n      localPlayback.current = smoothPlaybackRef.current;\n    }\n\n    const index = Math.floor(localPlayback.current);\n    const fraction = localPlayback.current - index;\n\n    const point = lapData.points[index];\n    const nextPoint = lapData.points[Math.min(index + 1, lapData.points.length - 1)];\n\n    if (!point) return;\n\n    const x = point.x + (nextPoint.x - point.x) * fraction;\n    const z = point.y + (nextPoint.y - point.y) * fraction;\n\n    carRef.current.position.set(x, 1, z);\n\n    if (cameraTargetRef) {\n      cameraTargetRef.current.x = x;\n      cameraTargetRef.current.z = z;\n    }\n\n    const dx = x - lastPos.current.x;\n    const dz = z - lastPos.current.z;\n    const movementMag = Math.sqrt(dx * dx + dz * dz);\n\n    if (movementMag > 0.1) {\n      const targetRotation = Math.atan2(dx, dz);\n\n      let diff = targetRotation - smoothRotation.current;\n      while (diff > Math.PI) diff -= Math.PI * 2;\n      while (diff < -Math.PI) diff += Math.PI * 2;\n\n      const rotSpeed = Math.min(movementMag * 0.5, 0.5);\n      smoothRotation.current += diff * rotSpeed;\n    }\n\n    carRef.current.rotation.y = smoothRotation.current;\n    lastPos.current.x = x;\n    lastPos.current.z = z;\n  });\n\n  if (!isActive) return null;\n\n  return (\n    <group ref={carRef}>\n      <mesh position={[0, 0.5, 0]} castShadow>\n        <boxGeometry args={[3.5, 1.2, 8]} />\n        <meshStandardMaterial color={color} metalness={0.6} roughness={0.3} />\n      </mesh>\n\n      <mesh position={[0, 0.8, -2]} castShadow>\n        <boxGeometry args={[2.5, 0.6, 2]} />\n        <meshStandardMaterial color={color} metalness={0.7} roughness={0.2} />\n      </mesh>\n\n      <mesh position={[0, 1.2, 2.5]} castShadow>\n        <boxGeometry args={[4, 0.3, 1.5]} />\n        <meshStandardMaterial color=\"#1a1a1a\" metalness={0.8} roughness={0.2} />\n      </mesh>\n\n      <mesh position={[0, 0.3, -4]} castShadow>\n        <boxGeometry args={[5, 0.2, 0.5]} />\n        <meshStandardMaterial color=\"#1a1a1a\" metalness={0.9} roughness={0.1} />\n      </mesh>\n\n      <mesh position={[-1.5, 0, 2]}>\n        <cylinderGeometry args={[0.6, 0.6, 0.5, 16]} />\n        <meshStandardMaterial color=\"#0a0a0a\" roughness={0.8} />\n      </mesh>\n      <mesh position={[1.5, 0, 2]} rotation={[0, 0, 0]}>\n        <cylinderGeometry args={[0.6, 0.6, 0.5, 16]} />\n        <meshStandardMaterial color=\"#0a0a0a\" roughness={0.8} />\n      </mesh>\n      <mesh position={[-1.5, 0, -2]}>\n        <cylinderGeometry args={[0.6, 0.6, 0.5, 16]} />\n        <meshStandardMaterial color=\"#0a0a0a\" roughness={0.8} />\n      </mesh>\n      <mesh position={[1.5, 0, -2]}>\n        <cylinderGeometry args={[0.6, 0.6, 0.5, 16]} />\n        <meshStandardMaterial color=\"#0a0a0a\" roughness={0.8} />\n      </mesh>\n\n      <mesh position={[0, 1.5, 3]}>\n        <boxGeometry args={[0.3, 0.5, 0.3]} />\n        <meshStandardMaterial color=\"#ffaa00\" emissive=\"#ffaa00\" emissiveIntensity={0.5} />\n      </mesh>\n    </group>\n  );\n}\n\nfunction Scene({ lapsData, currentLapIndex, playbackIndex, smoothPlaybackRef, isPlaying, playbackSpeed }: TrackViewerProps) {\n  const [cornerData, setCornerData] = useState<CornerData | undefined>();\n  const cameraTargetRef = useRef({ x: 0, z: 0 });\n\n  useEffect(() => {\n    fetch('/api/corners/bahrain')\n      .then(res => res.json())\n      .then(data => setCornerData(data))\n      .catch(err => console.error('Failed to load corner data:', err));\n  }, []);\n\n  useEffect(() => {\n    if (smoothPlaybackRef) {\n      smoothPlaybackRef.current = playbackIndex;\n    }\n  }, [playbackIndex, smoothPlaybackRef]);\n\n  if (!lapsData || lapsData.length === 0) return null;\n\n  const currentLap = lapsData[currentLapIndex];\n  if (!currentLap || !currentLap.points) return null;\n\n  const colors = [\"#4a9eff\", \"#ff9944\", \"#00ff88\", \"#ff4444\"];\n\n  return (\n    <>\n      <ambientLight intensity={1.5} />\n      <directionalLight position={[200, 300, 200]} intensity={1.2} castShadow />\n      <directionalLight position={[-200, 150, -200]} intensity={0.5} />\n\n      <mesh rotation={[-Math.PI / 2, 0, 0]} position={[0, -1, 0]} receiveShadow>\n        <planeGeometry args={[4000, 4000]} />\n        <meshStandardMaterial color=\"#0d0d0d\" roughness={0.95} />\n      </mesh>\n\n      <Track points={lapsData[0].points} cornerData={cornerData} />\n\n      {lapsData.map((lap, index) => (\n        <Car\n          key={index}\n          lapData={lap}\n          isActive={index === currentLapIndex}\n          smoothPlaybackRef={smoothPlaybackRef}\n          isPlaying={isPlaying}\n          playbackSpeed={playbackSpeed}\n          color={colors[index % colors.length]}\n          cameraTargetRef={index === currentLapIndex ? cameraTargetRef : undefined}\n        />\n      ))}\n\n      <OrbitControls\n        target={[cameraTargetRef.current.x, 0, cameraTargetRef.current.z]}\n        enableDamping\n        dampingFactor={0.15}\n        maxPolarAngle={Math.PI / 2.2}\n        minDistance={50}\n        maxDistance={1000}\n      />\n    </>\n  );\n}\n\nexport function TrackViewer(props: TrackViewerProps) {\n  return (\n    <Canvas\n      camera={{ position: [0, 400, 600], fov: 60, near: 1, far: 5000 }}\n      shadows\n      gl={{ antialias: true }}\n    >\n      <color attach=\"background\" args={[\"#050505\"]} />\n      <fog attach=\"fog\" args={[\"#050505\", 1000, 3000]} />\n      <Scene {...props} />\n    </Canvas>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1032, "column": 0}, "map": {"version":3,"sources":["file:///Users/haseebulhaqmalik/Desktop/lap-lens/web/app/viewer/components/PlaybackControls.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, Dispatch, SetStateAction } from \"react\";\n\ninterface PlaybackControlsProps {\n  lapsData: any[];\n  currentLapIndex: number;\n  setCurrentLapIndex: Dispatch<SetStateAction<number>>;\n  playbackIndex: number;\n  setPlaybackIndex: Dispatch<SetStateAction<number>>;\n  isPlaying: boolean;\n  setIsPlaying: Dispatch<SetStateAction<boolean>>;\n  playbackSpeed: number;\n  setPlaybackSpeed: Dispatch<SetStateAction<number>>;\n}\n\nexport function PlaybackControls({\n  lapsData,\n  currentLapIndex,\n  setCurrentLapIndex,\n  playbackIndex,\n  setPlaybackIndex,\n  isPlaying,\n  setIsPlaying,\n  playbackSpeed,\n  setPlaybackSpeed,\n}: PlaybackControlsProps) {\n  const currentLap = lapsData[currentLapIndex];\n  if (!currentLap || !currentLap.points) return null;\n\n  const maxIndex = currentLap.points.length - 1;\n\n  useEffect(() => {\n    if (!isPlaying) return;\n\n    const interval = setInterval(() => {\n      setPlaybackIndex(prev => {\n        if (prev >= maxIndex) {\n          setIsPlaying(false);\n          return maxIndex;\n        }\n        return prev + Math.max(1, Math.floor(playbackSpeed));\n      });\n    }, 16);\n\n    return () => clearInterval(interval);\n  }, [isPlaying, playbackSpeed, maxIndex, setPlaybackIndex, setIsPlaying]);\n\n  const togglePlay = () => setIsPlaying(!isPlaying);\n\n  const reset = () => {\n    setPlaybackIndex(0);\n    setIsPlaying(false);\n  };\n\n  const handleProgressChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = parseInt(e.target.value);\n    setPlaybackIndex(Math.floor((value / 1000) * maxIndex));\n  };\n\n  const speeds = [0.25, 0.5, 1, 2, 5];\n\n  const currentTime = currentLap.points[playbackIndex].time;\n  const totalTime = currentLap.points[maxIndex].time;\n\n  return (\n    <div className=\"absolute bottom-5 left-1/2 -translate-x-1/2 min-w-[600px]\">\n      <div className=\"rounded-xl border border-zinc-700 bg-black/80 p-5 backdrop-blur-lg\">\n        <div className=\"mb-4 flex gap-2\">\n          {lapsData.map((lap, index) => (\n            <button\n              key={index}\n              onClick={() => setCurrentLapIndex(index)}\n              className={`rounded-lg border px-4 py-2 transition-all ${\n                index === currentLapIndex\n                  ? \"border-blue-500 bg-blue-500/20 text-white\"\n                  : \"border-zinc-700 bg-zinc-800 text-zinc-400 hover:border-zinc-600\"\n              }`}\n            >\n              Lap {lap.number}\n            </button>\n          ))}\n        </div>\n\n        <div className=\"mb-4 flex items-center gap-4\">\n          <button\n            onClick={togglePlay}\n            className=\"rounded-lg border border-zinc-700 bg-zinc-800 px-5 py-2 text-white transition-colors hover:bg-zinc-700\"\n          >\n            {isPlaying ? \"‚è∏ Pause\" : \"‚ñ∂ Play\"}\n          </button>\n\n          <button\n            onClick={reset}\n            className=\"rounded-lg border border-zinc-700 bg-zinc-800 px-5 py-2 text-white transition-colors hover:bg-zinc-700\"\n          >\n            ‚Ü∫ Reset\n          </button>\n\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"1000\"\n            value={(playbackIndex / maxIndex) * 1000}\n            onChange={handleProgressChange}\n            className=\"flex-1 accent-blue-500\"\n          />\n\n          <span className=\"min-w-[100px] text-sm text-zinc-400\">\n            {currentTime.toFixed(1)}s / {totalTime.toFixed(1)}s\n          </span>\n        </div>\n\n        <div className=\"flex items-center gap-4\">\n          <span className=\"w-16 text-sm text-zinc-400\">Speed:</span>\n          {speeds.map((speed) => (\n            <button\n              key={speed}\n              onClick={() => setPlaybackSpeed(speed)}\n              className={`rounded-lg border px-4 py-2 text-sm transition-all ${\n                speed === playbackSpeed\n                  ? \"border-blue-500 bg-blue-500 text-white\"\n                  : \"border-zinc-700 bg-zinc-800 text-zinc-400 hover:bg-zinc-700\"\n              }`}\n            >\n              {speed}x\n            </button>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAgBO,SAAS,iBAAiB,EAC/B,QAAQ,EACR,eAAe,EACf,kBAAkB,EAClB,aAAa,EACb,gBAAgB,EAChB,SAAS,EACT,YAAY,EACZ,aAAa,EACb,gBAAgB,EACM;IACtB,MAAM,aAAa,QAAQ,CAAC,gBAAgB;IAC5C,IAAI,CAAC,cAAc,CAAC,WAAW,MAAM,EAAE,OAAO;IAE9C,MAAM,WAAW,WAAW,MAAM,CAAC,MAAM,GAAG;IAE5C,IAAA,mPAAS,EAAC;QACR,IAAI,CAAC,WAAW;QAEhB,MAAM,WAAW,YAAY;YAC3B,iBAAiB,CAAA;gBACf,IAAI,QAAQ,UAAU;oBACpB,aAAa;oBACb,OAAO;gBACT;gBACA,OAAO,OAAO,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC;YACvC;QACF,GAAG;QAEH,OAAO,IAAM,cAAc;IAC7B,GAAG;QAAC;QAAW;QAAe;QAAU;QAAkB;KAAa;IAEvE,MAAM,aAAa,IAAM,aAAa,CAAC;IAEvC,MAAM,QAAQ;QACZ,iBAAiB;QACjB,aAAa;IACf;IAEA,MAAM,uBAAuB,CAAC;QAC5B,MAAM,QAAQ,SAAS,EAAE,MAAM,CAAC,KAAK;QACrC,iBAAiB,KAAK,KAAK,CAAC,AAAC,QAAQ,OAAQ;IAC/C;IAEA,MAAM,SAAS;QAAC;QAAM;QAAK;QAAG;QAAG;KAAE;IAEnC,MAAM,cAAc,WAAW,MAAM,CAAC,cAAc,CAAC,IAAI;IACzD,MAAM,YAAY,WAAW,MAAM,CAAC,SAAS,CAAC,IAAI;IAElD,qBACE,+QAAC;QAAI,WAAU;kBACb,cAAA,+QAAC;YAAI,WAAU;;8BACb,+QAAC;oBAAI,WAAU;8BACZ,SAAS,GAAG,CAAC,CAAC,KAAK,sBAClB,+QAAC;4BAEC,SAAS,IAAM,mBAAmB;4BAClC,WAAW,CAAC,2CAA2C,EACrD,UAAU,kBACN,8CACA,mEACJ;;gCACH;gCACM,IAAI,MAAM;;2BARV;;;;;;;;;;8BAaX,+QAAC;oBAAI,WAAU;;sCACb,+QAAC;4BACC,SAAS;4BACT,WAAU;sCAET,YAAY,YAAY;;;;;;sCAG3B,+QAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;sCAID,+QAAC;4BACC,MAAK;4BACL,KAAI;4BACJ,KAAI;4BACJ,OAAO,AAAC,gBAAgB,WAAY;4BACpC,UAAU;4BACV,WAAU;;;;;;sCAGZ,+QAAC;4BAAK,WAAU;;gCACb,YAAY,OAAO,CAAC;gCAAG;gCAAK,UAAU,OAAO,CAAC;gCAAG;;;;;;;;;;;;;8BAItD,+QAAC;oBAAI,WAAU;;sCACb,+QAAC;4BAAK,WAAU;sCAA6B;;;;;;wBAC5C,OAAO,GAAG,CAAC,CAAC,sBACX,+QAAC;gCAEC,SAAS,IAAM,iBAAiB;gCAChC,WAAW,CAAC,mDAAmD,EAC7D,UAAU,gBACN,2CACA,+DACJ;;oCAED;oCAAM;;+BARF;;;;;;;;;;;;;;;;;;;;;;AAenB"}},
    {"offset": {"line": 1203, "column": 0}, "map": {"version":3,"sources":["file:///Users/haseebulhaqmalik/Desktop/lap-lens/web/app/viewer/components/TelemetryPanel.tsx"],"sourcesContent":["\"use client\";\n\ninterface TelemetryPanelProps {\n  lapNumber: number;\n  point: any;\n}\n\nexport function TelemetryPanel({ lapNumber, point }: TelemetryPanelProps) {\n  if (!point) return null;\n\n  return (\n    <div className=\"absolute right-5 top-5 min-w-[250px]\">\n      <div className=\"rounded-xl border border-zinc-700 bg-black/80 p-5 backdrop-blur-lg\">\n        <h3 className=\"mb-4 text-lg font-semibold text-blue-500\">\n          Lap {lapNumber}\n        </h3>\n\n        <div className=\"space-y-3 text-sm\">\n          <div className=\"flex justify-between\">\n            <span className=\"text-zinc-400\">Speed</span>\n            <span className=\"font-mono font-bold text-blue-500\">\n              {Math.round(point.speed)} km/h\n            </span>\n          </div>\n\n          <div className=\"flex justify-between\">\n            <span className=\"text-zinc-400\">Distance</span>\n            <span className=\"font-mono font-bold text-white\">\n              {Math.round(point.distance)} m\n            </span>\n          </div>\n\n          <div className=\"flex justify-between\">\n            <span className=\"text-zinc-400\">Lateral G</span>\n            <span className=\"font-mono font-bold text-orange-500\">\n              {point.gLat.toFixed(2)}G\n            </span>\n          </div>\n\n          <div className=\"flex justify-between\">\n            <span className=\"text-zinc-400\">Longitudinal G</span>\n            <span className=\"font-mono font-bold text-orange-500\">\n              {point.gLong.toFixed(2)}G\n            </span>\n          </div>\n\n          <div className=\"flex justify-between\">\n            <span className=\"text-zinc-400\">Throttle</span>\n            <span className=\"font-mono font-bold text-green-500\">\n              {Math.round(point.throttle * 100)}%\n            </span>\n          </div>\n\n          <div className=\"flex justify-between\">\n            <span className=\"text-zinc-400\">Brake</span>\n            <span className=\"font-mono font-bold text-red-500\">\n              {Math.round(point.brake * 100)}%\n            </span>\n          </div>\n\n          <div className=\"flex justify-between\">\n            <span className=\"text-zinc-400\">Gear</span>\n            <span className=\"font-mono font-bold text-white\">\n              {point.gear || \"N\"}\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAOO,SAAS,eAAe,EAAE,SAAS,EAAE,KAAK,EAAuB;IACtE,IAAI,CAAC,OAAO,OAAO;IAEnB,qBACE,+QAAC;QAAI,WAAU;kBACb,cAAA,+QAAC;YAAI,WAAU;;8BACb,+QAAC;oBAAG,WAAU;;wBAA2C;wBAClD;;;;;;;8BAGP,+QAAC;oBAAI,WAAU;;sCACb,+QAAC;4BAAI,WAAU;;8CACb,+QAAC;oCAAK,WAAU;8CAAgB;;;;;;8CAChC,+QAAC;oCAAK,WAAU;;wCACb,KAAK,KAAK,CAAC,MAAM,KAAK;wCAAE;;;;;;;;;;;;;sCAI7B,+QAAC;4BAAI,WAAU;;8CACb,+QAAC;oCAAK,WAAU;8CAAgB;;;;;;8CAChC,+QAAC;oCAAK,WAAU;;wCACb,KAAK,KAAK,CAAC,MAAM,QAAQ;wCAAE;;;;;;;;;;;;;sCAIhC,+QAAC;4BAAI,WAAU;;8CACb,+QAAC;oCAAK,WAAU;8CAAgB;;;;;;8CAChC,+QAAC;oCAAK,WAAU;;wCACb,MAAM,IAAI,CAAC,OAAO,CAAC;wCAAG;;;;;;;;;;;;;sCAI3B,+QAAC;4BAAI,WAAU;;8CACb,+QAAC;oCAAK,WAAU;8CAAgB;;;;;;8CAChC,+QAAC;oCAAK,WAAU;;wCACb,MAAM,KAAK,CAAC,OAAO,CAAC;wCAAG;;;;;;;;;;;;;sCAI5B,+QAAC;4BAAI,WAAU;;8CACb,+QAAC;oCAAK,WAAU;8CAAgB;;;;;;8CAChC,+QAAC;oCAAK,WAAU;;wCACb,KAAK,KAAK,CAAC,MAAM,QAAQ,GAAG;wCAAK;;;;;;;;;;;;;sCAItC,+QAAC;4BAAI,WAAU;;8CACb,+QAAC;oCAAK,WAAU;8CAAgB;;;;;;8CAChC,+QAAC;oCAAK,WAAU;;wCACb,KAAK,KAAK,CAAC,MAAM,KAAK,GAAG;wCAAK;;;;;;;;;;;;;sCAInC,+QAAC;4BAAI,WAAU;;8CACb,+QAAC;oCAAK,WAAU;8CAAgB;;;;;;8CAChC,+QAAC;oCAAK,WAAU;8CACb,MAAM,IAAI,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO7B"}},
    {"offset": {"line": 1446, "column": 0}, "map": {"version":3,"sources":["file:///Users/haseebulhaqmalik/Desktop/lap-lens/web/app/viewer/components/LapUploader.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport Link from \"next/link\";\n\ninterface LapUploaderProps {\n  onLapsLoaded: (data: any[]) => void;\n}\n\nexport function LapUploader({ onLapsLoaded }: LapUploaderProps) {\n  const [availableLaps, setAvailableLaps] = useState<any[]>([]);\n  const [selectedLaps, setSelectedLaps] = useState<Set<number>>(new Set());\n  const [loading, setLoading] = useState(true);\n  const [loadingLaps, setLoadingLaps] = useState(false);\n\n  useEffect(() => {\n    fetchAvailableLaps();\n  }, []);\n\n  const fetchAvailableLaps = async () => {\n    try {\n      const res = await fetch(\"/api/laps\");\n      const data = await res.json();\n      setAvailableLaps(data.laps);\n    } catch (error) {\n      console.error(\"Failed to fetch laps:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const toggleLapSelection = (lapNumber: number) => {\n    const newSelection = new Set(selectedLaps);\n    if (newSelection.has(lapNumber)) {\n      newSelection.delete(lapNumber);\n    } else {\n      newSelection.add(lapNumber);\n    }\n    setSelectedLaps(newSelection);\n  };\n\n  const loadSelectedLaps = async () => {\n    if (selectedLaps.size === 0) return;\n\n    setLoadingLaps(true);\n    const lapsData: any[] = [];\n\n    for (const lapNumber of Array.from(selectedLaps)) {\n      try {\n        const res = await fetch(`/api/laps/${lapNumber}`);\n        const data = await res.json();\n        lapsData.push({\n          number: lapNumber,\n          points: data.points,\n        });\n      } catch (error) {\n        console.error(`Failed to load lap ${lapNumber}:`, error);\n      }\n    }\n\n    lapsData.sort((a, b) => a.number - b.number);\n    onLapsLoaded(lapsData);\n    setLoadingLaps(false);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex min-h-screen items-center justify-center bg-gradient-to-br from-zinc-900 via-black to-zinc-900\">\n        <div className=\"text-white\">Loading laps...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex min-h-screen items-center justify-center bg-gradient-to-br from-zinc-900 via-black to-zinc-900\">\n      <div className=\"w-full max-w-3xl p-8\">\n        <Link\n          href=\"/\"\n          className=\"mb-8 inline-block text-zinc-400 transition-colors hover:text-white\"\n        >\n          ‚Üê Back to Dashboard\n        </Link>\n\n        <div className=\"mb-8 text-center\">\n          <h1 className=\"mb-2 text-4xl font-bold text-white\">\n            3D Track Viewer\n          </h1>\n          <p className=\"text-zinc-400\">\n            Select laps to visualize in 3D\n          </p>\n        </div>\n\n        {availableLaps.length === 0 ? (\n          <div className=\"rounded-2xl border border-zinc-700 bg-zinc-800/50 p-16 text-center\">\n            <div className=\"mx-auto mb-4 text-6xl\">üèéÔ∏è</div>\n            <h3 className=\"mb-2 text-xl font-semibold text-white\">No laps found</h3>\n            <p className=\"text-zinc-400\">\n              Record some laps using the UDP listener first\n            </p>\n          </div>\n        ) : (\n          <>\n            <div className=\"mb-6 rounded-2xl border border-zinc-700 bg-zinc-800/50 p-6\">\n              <h3 className=\"mb-4 text-lg font-semibold text-white\">\n                Available Laps ({availableLaps.length})\n              </h3>\n\n              <div className=\"grid gap-3 md:grid-cols-2 lg:grid-cols-3\">\n                {availableLaps.map((lap) => (\n                  <button\n                    key={lap.lapNumber}\n                    onClick={() => toggleLapSelection(lap.lapNumber)}\n                    className={`rounded-lg border p-4 text-left transition-all ${\n                      selectedLaps.has(lap.lapNumber)\n                        ? \"border-blue-500 bg-blue-500/20\"\n                        : \"border-zinc-700 bg-zinc-800 hover:border-zinc-600\"\n                    }`}\n                  >\n                    <div className=\"mb-1 text-lg font-semibold text-white\">\n                      Lap {lap.lapNumber}\n                    </div>\n                    {lap.trackName && (\n                      <div className=\"text-sm text-zinc-400\">{lap.trackName}</div>\n                    )}\n                    {lap.carName && (\n                      <div className=\"text-xs text-zinc-500\">{lap.carName}</div>\n                    )}\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            <button\n              onClick={loadSelectedLaps}\n              disabled={selectedLaps.size === 0 || loadingLaps}\n              className=\"w-full rounded-lg bg-blue-500 px-6 py-4 font-semibold text-white transition-colors hover:bg-blue-600 disabled:cursor-not-allowed disabled:opacity-50\"\n            >\n              {loadingLaps\n                ? \"Loading...\"\n                : `Load ${selectedLaps.size} Lap${selectedLaps.size !== 1 ? \"s\" : \"\"}`}\n            </button>\n          </>\n        )}\n\n        <div className=\"mt-8 rounded-xl border border-zinc-700 bg-zinc-800/30 p-6\">\n          <h4 className=\"mb-3 font-semibold text-white\">Quick Tips</h4>\n          <ul className=\"space-y-2 text-sm text-zinc-400\">\n            <li>‚Ä¢ Select one or more laps to visualize</li>\n            <li>‚Ä¢ Use playback controls to replay laps</li>\n            <li>‚Ä¢ Compare multiple laps side-by-side</li>\n            <li>‚Ä¢ View real-time telemetry data</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1742, "column": 0}, "map": {"version":3,"sources":["file:///Users/haseebulhaqmalik/Desktop/lap-lens/web/app/viewer/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef } from \"react\";\nimport { TrackViewer } from \"./components/TrackViewer\";\nimport { PlaybackControls } from \"./components/PlaybackControls\";\nimport { TelemetryPanel } from \"./components/TelemetryPanel\";\nimport { LapUploader } from \"./components/LapUploader\";\n\nexport default function ViewerPage() {\n  const [lapsData, setLapsData] = useState<any[]>([]);\n  const [currentLapIndex, setCurrentLapIndex] = useState(0);\n  const [playbackIndex, setPlaybackIndex] = useState(0);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [playbackSpeed, setPlaybackSpeed] = useState(1.0);\n  const smoothPlaybackRef = useRef(0);\n\n  const handleLapsLoaded = (data: any[]) => {\n    setLapsData(data);\n    setPlaybackIndex(0);\n    setCurrentLapIndex(0);\n  };\n\n  const currentLap = lapsData[currentLapIndex];\n  const currentPoint = currentLap?.points?.[playbackIndex];\n\n  return (\n    <div className=\"relative h-screen w-screen overflow-hidden bg-black\">\n      {lapsData.length === 0 ? (\n        <LapUploader onLapsLoaded={handleLapsLoaded} />\n      ) : (\n        <>\n          <TrackViewer\n            lapsData={lapsData}\n            currentLapIndex={currentLapIndex}\n            playbackIndex={playbackIndex}\n            smoothPlaybackRef={smoothPlaybackRef}\n            isPlaying={isPlaying}\n            playbackSpeed={playbackSpeed}\n          />\n\n          {currentLap && (\n            <TelemetryPanel\n              lapNumber={currentLap.number}\n              point={currentPoint}\n            />\n          )}\n\n          <PlaybackControls\n            lapsData={lapsData}\n            currentLapIndex={currentLapIndex}\n            setCurrentLapIndex={setCurrentLapIndex}\n            playbackIndex={playbackIndex}\n            setPlaybackIndex={setPlaybackIndex}\n            isPlaying={isPlaying}\n            setIsPlaying={setIsPlaying}\n            playbackSpeed={playbackSpeed}\n            setPlaybackSpeed={setPlaybackSpeed}\n          />\n        </>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQe,SAAS;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,kPAAQ,EAAQ,EAAE;IAClD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,kPAAQ,EAAC;IACvD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,kPAAQ,EAAC;IACnD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,kPAAQ,EAAC;IAC3C,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,kPAAQ,EAAC;IACnD,MAAM,oBAAoB,IAAA,gPAAM,EAAC;IAEjC,MAAM,mBAAmB,CAAC;QACxB,YAAY;QACZ,iBAAiB;QACjB,mBAAmB;IACrB;IAEA,MAAM,aAAa,QAAQ,CAAC,gBAAgB;IAC5C,MAAM,eAAe,YAAY,QAAQ,CAAC,cAAc;IAExD,qBACE,+QAAC;QAAI,WAAU;kBACZ,SAAS,MAAM,KAAK,kBACnB,+QAAC,2LAAW;YAAC,cAAc;;;;;iCAE3B;;8BACE,+QAAC,2LAAW;oBACV,UAAU;oBACV,iBAAiB;oBACjB,eAAe;oBACf,mBAAmB;oBACnB,WAAW;oBACX,eAAe;;;;;;gBAGhB,4BACC,+QAAC,iMAAc;oBACb,WAAW,WAAW,MAAM;oBAC5B,OAAO;;;;;;8BAIX,+QAAC,qMAAgB;oBACf,UAAU;oBACV,iBAAiB;oBACjB,oBAAoB;oBACpB,eAAe;oBACf,kBAAkB;oBAClB,WAAW;oBACX,cAAc;oBACd,eAAe;oBACf,kBAAkB;;;;;;;;;;;;;AAM9B"}}]
}