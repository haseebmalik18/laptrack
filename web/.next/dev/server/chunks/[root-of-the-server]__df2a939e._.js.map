{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/haseebulhaqmalik/Desktop/lap-lens/web/app/api/analysis/compare/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport path from 'path';\nimport fs from 'fs';\nimport { SpeedComparisonAnalyzer } from '../../../../../src/analysis/speed-comparison';\nimport { SectorAnalyzer } from '../../../../../src/analysis/sector-analysis';\nimport { GForceAnalyzer } from '../../../../../src/analysis/gforce-analysis';\nimport { LapLoader } from '../../../../../src/analysis/lap-loader';\nimport { LapAligner } from '../../../../../src/analysis/lap-aligner';\n\n// DEMO MODE - Returns mock data for LinkedIn showcase\nexport async function GET(request: Request) {\n  try {\n    const { searchParams } = new URL(request.url);\n    const type = searchParams.get('type') || 'speed';\n\n    // Generate impressive mock data\n    const mockData = generateMockComparison(type);\n    return NextResponse.json(mockData);\n  } catch (error) {\n    console.error('Error in comparison analysis:', error);\n    return NextResponse.json(\n      { error: 'Failed to perform analysis' },\n      { status: 500 }\n    );\n  }\n}\n\nfunction generateMockComparison(type: string) {\n  if (type === 'speed') {\n    return {\n      type: 'speed',\n      comparison: {\n        cornerComparison: Array.from({ length: 15 }, (_, i) => {\n          const entryA = 180 + Math.random() * 40;\n          const entryB = entryA + (-3 + Math.random() * 8);\n          const apexA = 120 + Math.random() * 30;\n          const apexB = apexA + (-3 + Math.random() * 8);\n          const exitA = 150 + Math.random() * 35;\n          const exitB = exitA + (-3 + Math.random() * 8);\n          const minA = 110 + Math.random() * 25;\n          const minB = minA + (-3 + Math.random() * 8);\n\n          return {\n            corner: i + 1,\n            lapA: {\n              entry: entryA,\n              apex: apexA,\n              exit: exitA,\n              min: minA,\n            },\n            lapB: {\n              entry: entryB,\n              apex: apexB,\n              exit: exitB,\n              min: minB,\n            },\n            delta: {\n              entry: entryA - entryB,\n              apex: apexA - apexB,\n              exit: exitA - exitB,\n              min: minA - minB,\n              time: -0.05 + Math.random() * 0.15,\n            },\n          };\n        }),\n        accelerationZones: [],\n        summary: {\n          totalTimeDelta: 1.234,\n          avgSpeedDelta: -5.6,\n          timeInCorners: 45.2,\n          cornersAnalyzed: 15,\n        },\n      },\n    };\n  }\n\n  if (type === 'sector') {\n    return {\n      type: 'sector',\n      comparison: {\n        sectors: [\n          {\n            sector: 1,\n            lapA: { time: 28.5, avgSpeed: 185, corners: 5, throttle: 68, brake: 12 },\n            lapB: { time: 27.8, avgSpeed: 192, corners: 5, throttle: 72, brake: 10 },\n            delta: { time: 0.7, percentage: 2.45, avgSpeed: -7 },\n          },\n          {\n            sector: 2,\n            lapA: { time: 32.1, avgSpeed: 178, corners: 6, throttle: 65, brake: 15 },\n            lapB: { time: 31.2, avgSpeed: 186, corners: 6, throttle: 70, brake: 13 },\n            delta: { time: 0.9, percentage: 2.8, avgSpeed: -8 },\n          },\n          {\n            sector: 3,\n            lapA: { time: 25.6, avgSpeed: 195, corners: 4, throttle: 75, brake: 8 },\n            lapB: { time: 25.9, avgSpeed: 191, corners: 4, throttle: 73, brake: 9 },\n            delta: { time: -0.3, percentage: -1.17, avgSpeed: 4 },\n          },\n        ],\n        summary: {\n          totalDelta: 1.3,\n          bestSector: 3,\n          bestSectorDelta: -0.3,\n          worstSector: 2,\n          worstSectorDelta: 0.9,\n        },\n      },\n    };\n  }\n\n  if (type === 'gforce') {\n    return {\n      type: 'gforce',\n      comparison: {\n        cornerComparison: Array.from({ length: 15 }, (_, i) => ({\n          corner: i + 1,\n          lapA: {\n            peakLateral: 2.8 + Math.random() * 0.5,\n            peakLongitudinal: 3.2 + Math.random() * 0.6,\n            peakCombined: 3.5 + Math.random() * 0.4,\n            avgLateral: 2.1 + Math.random() * 0.3,\n            consistency: 0.85 + Math.random() * 0.1,\n          },\n          lapB: {\n            peakLateral: 2.9 + Math.random() * 0.5,\n            peakLongitudinal: 3.3 + Math.random() * 0.6,\n            peakCombined: 3.6 + Math.random() * 0.4,\n            avgLateral: 2.2 + Math.random() * 0.3,\n            consistency: 0.88 + Math.random() * 0.1,\n          },\n          delta: {\n            peakLateral: -0.1 + Math.random() * 0.2,\n            peakLongitudinal: -0.1 + Math.random() * 0.2,\n            peakCombined: -0.1 + Math.random() * 0.2,\n            avgLateral: -0.1 + Math.random() * 0.2,\n          },\n        })),\n        insights: [\n          {\n            corner: 1,\n            insight: 'Under-braking detected',\n            recommendation: 'Brake 10m later to carry more speed',\n            confidence: 'high',\n          },\n          {\n            corner: 4,\n            insight: 'Not using full grip',\n            recommendation: 'Push harder through corner, 0.3G available',\n            confidence: 'high',\n          },\n          {\n            corner: 10,\n            insight: 'Better previous corner',\n            recommendation: 'Faster entry from Turn 9 exit',\n            confidence: 'medium',\n          },\n        ],\n        summary: {\n          avgLateralGA: 2.15,\n          avgLongitudinalGA: 2.85,\n          peakCombinedGA: 3.52,\n        },\n      },\n    };\n  }\n\n  return { type, comparison: {} };\n}\n"],"names":[],"mappings":"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"}}]
}