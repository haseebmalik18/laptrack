{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/haseebulhaqmalik/Desktop/lap-lens/web/app/api/laps/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport fs from \"fs\";\nimport path from \"path\";\n\nexport async function GET() {\n  const lapsDir = path.join(process.cwd(), \"..\", \"laps\");\n\n  if (!fs.existsSync(lapsDir)) {\n    return NextResponse.json({ laps: [] });\n  }\n\n  const files = fs.readdirSync(lapsDir);\n  const csvFiles = files.filter(f => f.endsWith(\".csv\"));\n\n  const laps = csvFiles.map(file => {\n    const match = file.match(/lap_(\\d+)/);\n    const lapNumber = match ? parseInt(match[1]) : 0;\n\n    const jsonFile = file.replace(\".csv\", \".json\");\n    const jsonPath = path.join(lapsDir, jsonFile);\n\n    let metadata = {};\n    if (fs.existsSync(jsonPath)) {\n      metadata = JSON.parse(fs.readFileSync(jsonPath, \"utf-8\"));\n    }\n\n    return {\n      lapNumber,\n      fileName: file,\n      ...metadata,\n    };\n  });\n\n  laps.sort((a, b) => a.lapNumber - b.lapNumber);\n\n  return NextResponse.json({ laps });\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe;IACpB,MAAM,UAAU,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,MAAM;IAE/C,IAAI,CAAC,wGAAE,CAAC,UAAU,CAAC,UAAU;QAC3B,OAAO,iLAAY,CAAC,IAAI,CAAC;YAAE,MAAM,EAAE;QAAC;IACtC;IAEA,MAAM,QAAQ,wGAAE,CAAC,WAAW,CAAC;IAC7B,MAAM,WAAW,MAAM,MAAM,CAAC,CAAA,IAAK,EAAE,QAAQ,CAAC;IAE9C,MAAM,OAAO,SAAS,GAAG,CAAC,CAAA;QACxB,MAAM,QAAQ,KAAK,KAAK,CAAC;QACzB,MAAM,YAAY,QAAQ,SAAS,KAAK,CAAC,EAAE,IAAI;QAE/C,MAAM,WAAW,KAAK,OAAO,CAAC,QAAQ;QACtC,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,SAAS;QAEpC,IAAI,WAAW,CAAC;QAChB,IAAI,wGAAE,CAAC,UAAU,CAAC,WAAW;YAC3B,WAAW,KAAK,KAAK,CAAC,wGAAE,CAAC,YAAY,CAAC,UAAU;QAClD;QAEA,OAAO;YACL;YACA,UAAU;YACV,GAAG,QAAQ;QACb;IACF;IAEA,KAAK,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,SAAS,GAAG,EAAE,SAAS;IAE7C,OAAO,iLAAY,CAAC,IAAI,CAAC;QAAE;IAAK;AAClC"}}]
}