{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/haseebulhaqmalik/Desktop/lap-lens/web/app/api/laps/%5BlapNumber%5D/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport fs from \"fs\";\nimport path from \"path\";\n\nexport async function GET(\n  request: Request,\n  { params }: { params: Promise<{ lapNumber: string }> }\n) {\n  const { lapNumber } = await params;\n  const lapsDir = path.join(process.cwd(), \"..\", \"laps\");\n\n  const files = fs.readdirSync(lapsDir);\n  const csvFile = files.find(f => f.includes(`lap_${lapNumber}.csv`));\n\n  if (!csvFile) {\n    return NextResponse.json({ error: \"Lap not found\" }, { status: 404 });\n  }\n\n  const csvPath = path.join(lapsDir, csvFile);\n  const csvContent = fs.readFileSync(csvPath, \"utf-8\");\n\n  const lines = csvContent.trim().split(\"\\n\");\n  const headers = lines[0].split(\",\");\n\n  const points = lines.slice(1).map(line => {\n    const values = line.split(\",\");\n    const point: any = {};\n    headers.forEach((header, i) => {\n      const key = header.trim();\n      const value = values[i]?.trim();\n      point[key] = isNaN(Number(value)) ? value : Number(value);\n    });\n    return point;\n  });\n\n  return NextResponse.json({ points });\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe,IACpB,OAAgB,EAChB,EAAE,MAAM,EAA8C;IAEtD,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM;IAC5B,MAAM,UAAU,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,MAAM;IAE/C,MAAM,QAAQ,wGAAE,CAAC,WAAW,CAAC;IAC7B,MAAM,UAAU,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,QAAQ,CAAC,CAAC,IAAI,EAAE,UAAU,IAAI,CAAC;IAEjE,IAAI,CAAC,SAAS;QACZ,OAAO,iLAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAgB,GAAG;YAAE,QAAQ;QAAI;IACrE;IAEA,MAAM,UAAU,4GAAI,CAAC,IAAI,CAAC,SAAS;IACnC,MAAM,aAAa,wGAAE,CAAC,YAAY,CAAC,SAAS;IAE5C,MAAM,QAAQ,WAAW,IAAI,GAAG,KAAK,CAAC;IACtC,MAAM,UAAU,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC;IAE/B,MAAM,SAAS,MAAM,KAAK,CAAC,GAAG,GAAG,CAAC,CAAA;QAChC,MAAM,SAAS,KAAK,KAAK,CAAC;QAC1B,MAAM,QAAa,CAAC;QACpB,QAAQ,OAAO,CAAC,CAAC,QAAQ;YACvB,MAAM,MAAM,OAAO,IAAI;YACvB,MAAM,QAAQ,MAAM,CAAC,EAAE,EAAE;YACzB,KAAK,CAAC,IAAI,GAAG,MAAM,OAAO,UAAU,QAAQ,OAAO;QACrD;QACA,OAAO;IACT;IAEA,OAAO,iLAAY,CAAC,IAAI,CAAC;QAAE;IAAO;AACpC"}}]
}